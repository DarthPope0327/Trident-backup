
[include BTKS_Macros.cfg]
[include shell_command.cfg]
[include K-ShakeTune/*.cfg]
[include macros.cfg]
[include AFC/*.cfg]
# This file contains common pin mappings for the Voron Leviathan V1.1
# To use this config, the firmware should be compiled for the STM32F446 with "No bootloader"
# Enable "extra low-level configuration options" and select the "12MHz crystal" as clock reference

# See docs/Config_Reference.md for a description of parameters.

## Voron Design VORON Trident 250/300/350mm Leviathan V1.1 config

## *** THINGS TO CHANGE/CHECK: ***
## MCU paths                            [mcu] section
## Thermistor types                     [extruder] and [heater_bed] sections - See https://www.klipper3d.org/Config_Reference.html#common-thermistors for common thermistor types
## Z Endstop Switch location            [safe_z_home] section
## Homing end position                  [gcode_macro G32] section
## Z Endstop Switch  offset for Z0      [stepper_z] section
## Probe points                         [quad_gantry_level] section
## Min & Max gantry corner postions     [quad_gantry_level] section
## PID tune                             [extruder] and [heater_bed] sections
## Probe pin                            [probe] section
## Fine tune E steps                    [extruder] section

[mcu]
##  Obtain definition by "ls -l /dev/serial/by-id/" then unplug to verify
##--------------------------------------------------------------------
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_45005E000851313133353932-if00
restart_method: command
##--------------------------------------------------------------------
#[mcu EBB]
#serial: /dev/serial/by-id/usb-Klipper_Klipper_firmware_12345-if00
#canbus_uuid: 0ef393546b6f
##--------------------------------------------------------------------
[mcu H36]
serial: /dev/serial/by-id/usb-Klipper_stm32g0b1xx_430051000950415742363820-if00
# CAN_RX: PD0
# CAN_TX: PD1
#CAN USB switch: PA2
# logic Low = COM to A PORT  CANBUS 
# Logic High = COM to B PORT  USB
##---------------------------------------------------------------------

[include mainsail.cfg]
[exclude_object]
#[include klicky-probe.cfg]
#[include KAMP_Settings.cfg]
#[include stealthburner_led_effects_barf1.cfg]
[include nozzle_scrub.cfg]


[printer]
kinematics: corexy
max_velocity: 600  
max_accel: 100000
max_z_velocity: 15          #Max 15 for 12V TMC Drivers, can increase for 24V
max_z_accel: 350
minimum_cruise_ratio: .25
square_corner_velocity: 12.0

#####################################################################
#   X/Y Stepper Settings
#####################################################################

##  B Stepper - Left
##  Connected to HV STEPPER 0
##  Endstop connected to X-ENDSTOP
[stepper_x]
step_pin: PB10
dir_pin: PB11
enable_pin: !PG0
rotation_distance: 40
microsteps: 128
full_steps_per_rotation:200  #set to 200 for 1.8 degree stepper
endstop_pin: H36:PA10
position_min: 0
##--------------------------------------------------------------------


##  X endstop position
position_endstop: 300
position_max: 300


##--------------------------------------------------------------------
homing_speed: 100   #Max 100
homing_retract_dist: 5
homing_positive_dir: true

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc5160 stepper_x]
cs_pin: PE15
spi_bus: spi4
#diag0_pin: ^!PG1
interpolate: false
run_current: 2.2
sense_resistor: 0.075
stealthchop_threshold: 0

##  A Stepper - Right
##  Connected to HV STEPPER 1
##  Endstop connected to Y-ENDSTOP
[stepper_y]
step_pin: PF15
dir_pin: PF14
enable_pin: !PE9
rotation_distance: 40
microsteps: 128
full_steps_per_rotation:200  #set to 200 for 1.8 degree stepper
endstop_pin: PC2
position_min: 0
##--------------------------------------------------------------------


##  Y endstop
position_endstop: 300
position_max: 301


##--------------------------------------------------------------------
homing_speed: 100  #Max 100
homing_retract_dist: 5
homing_positive_dir: true

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc5160 stepper_y]
cs_pin: PE11
spi_bus: spi4
#diag0_pin: ^!PE10
interpolate: false
run_current: 2.2
sense_resistor: 0.075
stealthchop_threshold: 0
 
#####################################################################
#   Z Stepper Settings
#####################################################################

## Z0 Stepper - Front Left
##  Connected to STEPPER 0
##  Endstop connected to Z-ENDSTOP
[stepper_z]
step_pin: PD4
dir_pin: !PD3
enable_pin: !PD7
# Rotation Distance for TR8x8 = 8, TR8x4 = 4, TR8x2 = 2
rotation_distance: 4  
microsteps: 32
endstop_pin: probe:z_virtual_endstop # use beacon as virtual endstop
##  Z-position of nozzle (in mm) to z-endstop trigger point relative to print surface (Z0)
##  (+) value = endstop above Z0, (-) value = endstop below
##  Increasing position_endstop brings nozzle closer to the bed
##  After you run Z_ENDSTOP_CALIBRATE, position_endstop will be stored at the very end of your config
#position_endstop: 0
##--------------------------------------------------------------------

##  Z endstop position
position_max: 230


##--------------------------------------------------------------------
position_min: -5
homing_speed: 8
second_homing_speed: 3
homing_retract_dist: 0

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z]
uart_pin: PD5
#diag_pin: ^!PD6
interpolate: false
run_current: 0.8
sense_resistor: 0.110
stealthchop_threshold: 0

##  Z1 Stepper - Rear Center
##  Connected to STEPPER 1
[stepper_z1]
step_pin: PC12
dir_pin: !PC11
enable_pin: !PD2
# Rotation Distance for TR8x8 = 8, TR8x4 = 4, TR8x2 = 2
rotation_distance: 4  
microsteps: 32

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z1]
uart_pin: PD0
#diag_pin: ^!PD1
interpolate: false
run_current: 0.8
sense_resistor: 0.110
stealthchop_threshold: 0

##  Z2 Stepper - Front Right
##  Connected to STEPPER 2
[stepper_z2]
step_pin: PC9
dir_pin: !PC8
enable_pin: !PC10
# Rotation Distance for TR8x8 = 8, TR8x4 = 4, TR8x2 = 2
rotation_distance: 4 
microsteps: 32

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z2]
uart_pin: PA8
#diag_pin: ^!PA15
interpolate: false
run_current: 0.8
sense_resistor: 0.110
stealthchop_threshold: 0

#####################################################################
#   Extruder
#####################################################################

##  Connected to STEPPER 0
##  Heater - HEATER
##  Thermistor - TH0
[extruder]
step_pin: H36:PB9
dir_pin: !H36:PB8
enable_pin: !H36:PB7
##  Update value below when you perform extruder calibration
##  If you ask for 100mm of filament, but in reality it is 98mm:
##  rotation_distance = <previous_rotation_distance> * <actual_extrude_distance> / 100
##  22.6789511 is a good starting point
rotation_distance: 47.088   #Bondtech 5mm Drive Gears
##  Update Gear Ratio depending on your Extruder Type
##  Use 50:17 for Afterburner/Clockwork (BMG Gear Ratio)
##  Use 80:20 for M4, M3.1
gear_ratio: 9:1               #BMG Gear Ratio
microsteps: 16
full_steps_per_rotation: 200    #200 for 1.8 degree, 400 for 0.9 degree
nozzle_diameter: 0.400
filament_diameter: 1.75
heater_pin: H36:PA7
pullup_resistor: 2200
## Check what thermistor type you have. See https://www.klipper3d.org/Config_Reference.html#common-thermistors for common thermistor types.
## Use "Generic 3950" for NTC 100k 3950 thermistors
sensor_type: PT1000
sensor_pin: H36:PA6 #TH0
#pullup_resistor: 2200
min_temp: -10
max_temp: 400
max_power: 1.0
min_extrude_temp: 170
#control = pid
#pid_kp = 26.213
#pid_ki = 1.304
#pid_kd = 131.721
##  Try to keep pressure_advance below 1.0
pressure_advance: 0.025
##  Default is 0.040, leave stock
pressure_advance_smooth_time: 0.040
max_extrude_only_distance: 400
max_extrude_cross_section: 50

##  E0 on MOTOR6
##  Connected to STEPPER 4
[tmc2209 extruder]
uart_pin: H36:PC14
#interpolate: false
run_current: 0.6
#sense_resistor: 0.110
stealthchop_threshold: 0


#####################################################################
#   Bed Heater
#####################################################################

[heater_bed]
##  SSR Pin - HEATBED
##  Thermistor - TH1
heater_pin: PG11
## Check what thermistor type you have. See https://www.klipper3d.org/Config_Reference.html#common-thermistors for common thermistor types.
## Use "Generic 3950" for Keenovo heaters
sensor_type: Generic 3950
sensor_pin: PA2
pullup_resistor: 2200
##  Adjust Max Power so your heater doesn't warp your bed. Rule of thumb is 0.4 watts / cm^2 .
max_power: 0.7
min_temp: -10
max_temp: 120
#control: pid
#pid_kp: 58.437
#pid_ki: 2.347
#pid_kd: 363.769





#####################################################################
#   Fan Control
#####################################################################

[multi_pin my_fan]
pins: H36:PB15,H36:PA5
#   A comma separated list of pins associated with this alias. This
#   parameter must be provided.

[fan]
##  Print Cooling Fan - FAN0
pin: multi_pin:my_fan
##tachometer_pin: PB0
kick_start_time: 0.5
##  Depending on your fan, you may need to increase this value
##  if your fan will not start. Can change cycle_time (increase)
##  if your fan is not able to slow down effectively
off_below: 0.10

[heater_fan hotend_fan]
##  Hotend Fan - FAN1
pin: H36:PA9
##tachometer_pin: PB4
max_power: 1.0
kick_start_time: 0.5
heater: extruder
heater_temp: 50.0
##  If you are experiencing back flow, you can reduce fan_speed
#fan_speed: 1.0

[temperature_fan controller_pi_fans]
pin: PB7
max_power: 1.0
shutdown_speed: 0
off_below: .1
kick_start_time: 0.5
sensor_type: temperature_host
control: watermark
min_temp: 0
max_temp: 85
target_temp: 45
max_speed: .5

#[heater_fan controller_fan]
##  Controller fan - FAN2
#pin: PB7
##tachometer_pin: PF6
#kick_start_time: 0.5
#heater: heater_bed
#heater_temp: 20
#fan_speed: .5

[output_pin nevermore]
pin: PB3
pwm:true
#hardware_pwm: False
value: 0 #startup value
shutdown_value: 0
value: 0

[multi_pin my_multi_pin]
pins: PF7,PF9
#   A comma separated list of pins associated with this alias. This
#   parameter must be provided.



#[multi_pin part]
#pins: H36:PB14, H36:PA5

[fan_generic chamber_fan]
pin: multi_pin:my_multi_pin
max_power: 1.0
shutdown_speed: 0.0
#cycle_time:
#hardware_pwm:
kick_start_time: .5
off_below: .1

#####################################################################
#   Filament sensor
#####################################################################

#[filament_switch_sensor Filament]
#pause_on_runout: True
#runout_gcode: M600
#insert_gcode:
#event_delay: 3.0
#pause_delay: 0.5
#switch_pin: !PC0

#####################################################################
#   LED Control
#####################################################################

## Chamber Lighting (Optional)
## Connected to LED-STRIP
[output_pin caselight]
pin: PE6
pwm:true
#hardware_pwm: False
value: 0 #startup value
shutdown_value: 0
value: 0
cycle_time: 0.002

#####################################################################
#   Homing and Gantry Adjustment Routines
#####################################################################

[idle_timeout]
timeout: 180000

#[safe_z_home]
##  XY Location of the Z Endstop Switch
##  Update -10,-10 to the XY coordinates of your endstop pin 
##  (such as 157,305) after going through Z Endstop Pin
##  Location Definition step.
#home_xy_position:-10,-10
#speed:100
#z_hop:10

[z_tilt]
##  Use Z_TILT_ADJUST to level the bed .
##  z_positions: Location of toolhead
z_positions:
    -50, 18
    150, 348
    350, 18
points:
    30, 5
    150, 235
    270, 5
    
    
    ##--------------------------------------------------------------------
    
speed: 200
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.0075

########################################
# EXP1 / EXP2 (display) pins
########################################

[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PG9, EXP1_2=PG12,
    EXP1_3=PG13, EXP1_4=PG14,
    EXP1_5=PC13, EXP1_6=PC14,    # Slot in the socket on this side
    EXP1_7=PC15, EXP1_8=PF0,
    EXP1_9=<GND>, EXP1_10=<5V>,
    
    # EXP2 header
    EXP2_1=PA6, EXP2_2=PA5,
    EXP2_3=PE2, EXP2_4=PE4,
    EXP2_5=PE3, EXP2_6=PA7,      # Slot in the socket on this side
    EXP2_7=PE5, EXP2_8=<RST>,
    EXP2_9=<GND>, EXP2_10=PE4
    
    #####################################################################
    #   Displays
    #####################################################################
    
    #####################################################################
    #   Additional Sensors
    #####################################################################
    
[thermistor CMFB103F3950FANT]
temperature1: 0.0
resistance1: 32116.0
temperature2: 40.0
resistance2: 5309.0
temperature3: 80.0
resistance3: 1228.0

[temperature_sensor chamber]
 ## Chamber Temperature - T1
sensor_type: Generic 3950
sensor_pin: PA1
pullup_resistor: 2200
min_temp: -100
max_temp: 200
gcode_id: chamber_th

[temperature_sensor Pi]
sensor_type: temperature_host
min_temp: -10
max_temp: 100

[temperature_sensor MCU_Leviathan]
sensor_type: temperature_mcu
min_temp: -10
max_temp: 100

[temperature_sensor MCU_H36]
sensor_type: temperature_mcu
sensor_mcu: H36
min_temp: 0
max_temp: 150

[temperature_sensor MCU_H36_Driver_Temp]
sensor_type: Generic 3950
sensor_pin: H36: PA3
min_temp:0
max_temp:150

[thermistor NTC10K]
temperature1: 25
resistance1: 10000
beta: 3435

[temperature_sensor stepper_left]
sensor_type: NTC10K
sensor_pin: PA0
pullup_resistor: 2200

[temperature_sensor stepper_right]
sensor_type: NTC10K
sensor_pin: PA3
pullup_resistor: 2200


#####################################################################
#	Voltage Monitor
#####################################################################

[adc_temperature 5V_Monitor]
temperature1: 5
voltage1: 3.0
temperature2: 4
voltage2: 2.4
temperature3: 3
voltage3: 1.8

[adc_temperature 24V_Monitor]
temperature1: 24
voltage1: 3.13
temperature2: 22
voltage2: 2.87
temperature3: 21
voltage3: 2.74

[temperature_sensor 5V_Monitor]
sensor_type: 5V_Monitor
sensor_pin: H36:PA0   #5V_MON
adc_voltage: 3.3
voltage_offset: 0

[temperature_sensor 24V_Monitor]
sensor_type: 24V_Monitor
sensor_pin: H36:PA4   #24V_MON
adc_voltage: 3.3
voltage_offset: 0


[adxl345]
cs_pin: H36:PB12
spi_software_sclk_pin: H36:PB10
spi_software_mosi_pin: H36:PB11
spi_software_miso_pin: H36:PB2
axes_map: -y,z,-x

[resonance_tester]
accel_chip: beacon
probe_points:
    150, 150, 20  # an example
    
    
[bed_mesh]
speed: 200
horizontal_move_z: 5
mesh_min: 15, 35
mesh_max: 285, 265
probe_count: 30, 30
mesh_pps: 2, 3
algorithm: bicubic
#bicubic_tension: 0.2



[shaketune]
#    Path where the processed results will be stored. If the folder doesn't exist,
#    it will be automatically created. You can change this if you'd like to store 
#    results in a different location.
#    This setting defines how many results you want to keep in the result folder.
#    Once the specified number is exceeded, older results will be automatically deleted
#    to free up space on the SD card and avoid cluttering the results folder.
#    If set to True, Shake&Tune will store both the processed graphs and the raw accelerometer
#    .stdata files in the results folder. This can be useful for debugging or archiving purposes.
#    Please always attach them when reporting any issues on GitHub or Discord.
#    Mainsail and Fluidd doesn't create buttons for system commands (macros that are not part
#    of the printer.cfg file). This option allow Shake&Tune to inject them into the webui at runtime.
#    If set to False, the macros will be hidden but still accessible from the console by typing
#    their names manually, which can be useful if you prefer to encapsulate them into your own macros.
#    This defines the maximum processing time (in seconds) to allows to Shake&Tune for generating 
#    graphs from a .stdata file. 10 minutes should be more than enough in most cases, but if you have
#    slower hardware (e.g., older SD cards or low-performance devices), increase it to prevent timeouts.
#    Each Shake&Tune command uses the accelerometer to take multiple measurements. By default,
#    Shake&Tune will write a chunk of data to disk every two measurements, and at the end of the
#    command will merge these chunks into the final .stdata file for processing. "2" is a very
#    conservative setting to avoid Klipper Timer Too Close errors on lower end devices with little
#    RAM, and should work for everyone. However, if you are using a powerful computer, you may
#    wish to increase this value to keep more measurements in memory (e.g., 15-20) before writing
#    the chunk and avoid stressing the filesystem too much.
#    This setting defines the maximum frequency at which the calculation of the power spectral density
#    is cutoff. The default value should be fine for most machines and accelerometer combinations and
#    avoid touching it unless you know what you're doing.
#    Controls the resolution of the generated graphs. The default value of 300 dpi was optimized
#    and strikes a balance between performance and readability, ensuring that graphs are clear
#    without using too much RAM to generate them. Usually, you shouldn't need to change this value.

[gcode_macro _CLIENT_VARIABLE]
variable_park_at_cancel_x : 20  ; different park position during CANCEL_PRINT [None/Position as Float]; park_at_cancel must be True
variable_park_at_cancel_y : 20  ; different park position during CANCEL_PRINT [None/Position as Float]; park_at_cancel must be True
## !!! Caution [firmware_retraction] must be defined in the printer.cfg if you set use_fw_retract: True !!!
##                                   Specify the config name of the runout sensor e.g "filament_switch_sensor runout". Hint use the same as in your printer.cfg
## !!! Custom macros, please use with care and review the section of the corresponding macro.
## These macros are for simple operations like setting a status LED. Please make sure your macro does not interfere with the basic macro functions.
## Only  single line commands are supported, please create a macro if you need more than one command.
variable_user_pause_macro : ""    ; Everything inside the "" will be executed after the klipper base pause (PAUSE_BASE) function
variable_user_resume_macro: ""    ; Everything inside the "" will be executed before the klipper base resume (RESUME_BASE) function
variable_user_cancel_macro: ""    ; Everything inside the "" will be executed before the klipper base cancel (CANCEL_PRINT_BASE) function
gcode:
    
[gcode_macro M106]
description: Custom fan control function to allow slicers assuming bambu lab specific aux fan control to define an auxilary part cooling fan speed
rename_existing: M106.1
gcode:
    ## Define the mapping between the bambu lab fans and the fan_generic fans defined
    ## Source: https://forum.bambulab.com/t/bambu-lab-x1-specific-g-code/666
    ## NOTE: ensure P0 is left as "fan". This is important as you cannot set the
    ## standard part cooling fan Using the set_fan_speed command.
    ## This is accounted for in the macro and handled appropriately.
    {% set fan_map = ({
    "P0": "fan",
    "P1": "aux_fan",
    "P2": "chamber_fan",
    })
    %}
    
    ## Divide the params given into an array split on a singular whitespace
    {% set split_params = rawparams.split(" ") %}
    
    ## If we've had more than one paramater passed define requested fan and speed
    ## if one paramater is passed, assume were asking for the part cooling fan
    {% if split_params|length == 1 %}
    {% set requested_fan = "P0" %}
    {% set fan_speed = rawparams %}
    {% else %}
    {% set requested_fan, fan_speed = split_params %}
    {% endif %}
    
    ## check to ensure the requested fan is mapped
    ## this allows us to safely ignore commands for fans were not using
    {% if requested_fan in fan_map %}
    
    ## define the target fan device as per the above map
    {% set target_fan = fan_map[requested_fan] %}
    
    # If the target fan is the part cooling fan, just use the standard M106.
    {% if target_fan == "fan" %}
    M106.1 {fan_speed}
    {% else %}
    
    ## strip the leading S from the fan speed
    {% if fan_speed[0:1] == "S" %}
    {% set fan_speed = fan_speed[1:-1] %}
    {% endif %}
    
    # Convert the 0-255 fan percentage to a percentage between 0 and 1
    {% set fan_percentage = (fan_speed|int / 255 * 10)|round(1) %}
    
    # Set the requested fan speed on the target fan
    SET_FAN_SPEED fan={target_fan} speed={fan_percentage}
    {% endif %}
    {% endif %}
    
[beacon]
serial: /dev/serial/by-id/usb-Beacon_Beacon_RevH_08FF2B7B5154354D38202020FF0A1A24-if00
#   Path to the serial port for the beacon device. Typically has the form
#   /dev/serial/by-id/usb-Beacon_Beacon_...
speed: 5.
#   Z probing dive speed.
lift_speed: 5.
#   Z probing lift speed.
backlash_comp: 0.5
#   Backlash compensation distance for removing Z backlash before measuring
#   the sensor response.
x_offset: 0.
#   X offset of beacon from the nozzle.
y_offset: 26
#   Y offset of beacon from the nozzle.
#trigger_distance: 2.
#   Beacon trigger distance for homing.
#trigger_dive_threshold: 1.
#   Threshold for range vs dive mode probing. Beyond `trigger_distance +
#   trigger_dive_threshold` a dive will be used.
#trigger_hysteresis: 0.006
#   Hysteresis on trigger threshold for untriggering, as a percentage of the
#   trigger threshold.
#z_settling_time: 5
#   Delay (in ms) for the Z axis to settle before taking proximity measurements.
#cal_nozzle_z: 0.1
#   Expected nozzle offset after completing manual Z offset calibration.
#cal_floor: 0.2
#   Minimum z bound on sensor response measurement.
#cal_ceil: 5.
#   Maximum z bound on sensor response measurement.
#cal_speed: 1.
#   Speed while measuring response curve.
#cal_move_speed: 10.
#   Speed while moving to position for response curve measurement.
#default_model_name: default
#   Name of default beacon model to load.
#mesh_main_direction: y
#   Primary travel direction during mesh measurement.
#mesh_overscan: -1
#   Distance to use for direction changes at mesh line ends. Omit this setting
#   and a default will be calculated from line spacing and available travel.
#mesh_cluster_size: 1
#   Radius of mesh grid point clusters.
mesh_runs: 2
#   Number of passes to make during mesh scan.
#zero_reference_cluster_size: 1.
#   Radius of cluster used for zero reference position, this is the equivalent
#   of mesh_cluster_size for the zero reference position.
accel_scale: 16g
#   Adjust the sensitivity of the accelerometer during shaper measurement,
#   valid settings on RevH are 16g, 8g, 4g and 2g.
accel_axes_map: x, y, z
#   Reassign or invert axes of the accelerometer to align with machine coordinates.

default_probe_method: proximity
# Sets the default probing method for mesh, tilt, qgl, probe, etc.
contact_max_hotend_temperature: 180 # increase to enable hot contacting
# Temperature limit for the hotend when contacting, override this for temps which may damage some surfaces.
#contact_sensitivity: 0
# Adjusts noise tolerance of contact processing. Values 0-3 are valid, with 3 tolerating the most noise.
#contact_latency_min: 0
# Limits how low of a latency contact is allowed to advance.

# new additions for beacon safe_z_home functionality
home_xy_position: 150, 150
# X, Y coordinate for homing z via contact.
home_z_hop: 5
# Distance to retract before x/y homing moves.
home_z_hop_speed: 30
# Retraction speed for z hop.
home_xy_move_speed: 300
# Speed for moving to home_xy_position.
home_y_before_x: False
# If set, the Y axis will home first when using the beacon safe_z_home

# new additions for setting default homing mode
home_method: contact
# Sets default homing method used by G28. `proximity` requires a valid beacon model to be loaded.
home_method_when_homed: proximity # defaults to `home_method` value
# Sets the homing method when the machine is already in a homed state.
home_autocalibrate: always
# Sets the autocalibration behavior. `always` will autocal on every home, `unhomed` on initial homing,
# `never` will never so that models stored in config may be used with proximity homing.

#home_gcode_pre_x: _HOME_PRE_AXIS AXIS=X
# Enables a gcode macro before homing the x axis
#home_gcode_post_x: _HOME_POST_AXIS AXIS=X
# Enables a gcode macro after homing the x axis
#home_gcode_pre_y: _HOME_PRE_AXIS AXIS=Y
# Enables a gcode macro before homing the y axis
#home_gcode_post_y: _HOME_POST_AXIS AXIS=Y
# Enables a gcode macro after homing the x axis

#contact_activate_gcode: _CONTACT_ACTIVATE
# Enables a gcode macro to be called before contact is activated
#contact_deactivate_gcode: _CONTACT_DEACTIVATE
# Enables a gcode macro to be called after contact is deactivated

# new autocalibration config options
#autocal_speed: 3
# Speed during contact movement. Probing outside of 2-5mm/s not recommended and at your own risk.
#autocal_accel: 100
# Acceleration of autocal movement.
#autocal_retract_dist: 2
# Retract distance between autocal samples.
#autocal_retract_speed: 10
# Speed of autocal retraction move.
#autocal_sample_count: 3
# Number of samples used for each autocal.
#autocal_tolerance: 0.008
# Acceptance tolerance for an autocal result.
#autocal_max_retries: 3
# Number of retry attempts permitted when tolerance is exceeded.

[include shell_command.cfg]
#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 30.492
#*# pid_ki = 8.838
#*# pid_kd = 26.300
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 43.308
#*# pid_ki = 1.504
#*# pid_kd = 311.814
#*#
#*# [probe]
#*# z_offset = 8.700
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.011250, 0.003750, 0.010625, -0.001875, -0.026250, -0.044375, -0.046250
#*# 	0.006875, 0.009375, 0.028125, 0.010625, -0.005000, -0.031875, -0.043750
#*# 	0.005000, 0.017500, 0.023750, 0.003750, -0.022500, -0.033125, -0.035625
#*# 	0.006875, 0.027500, 0.031875, -0.066250, -0.014375, -0.032500, -0.038125
#*# 	0.018750, 0.040625, 0.037500, 0.019375, -0.005625, -0.020000, -0.020000
#*# x_count = 7
#*# y_count = 5
#*# mesh_x_pps = 2
#*# mesh_y_pps = 3
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 70.074
#*# max_x = 229.25400000000002
#*# min_y = 101.307
#*# max_y = 197.707
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 62.0
#*# shaper_type_y = mzv
#*# shaper_freq_y = 41.6
#*#
#*# [beacon model default]
#*# model_coef = 1.5535154337784458,
#*# 	  1.8638169042235557,
#*# 	  0.7231263095373093,
#*# 	  0.32947444125889475,
#*# 	  0.24783682803020604,
#*# 	  0.21103730100936383,
#*# 	  -0.021874387698145124,
#*# 	  -0.10248446493638054,
#*# 	  0.09753313016499886,
#*# 	  0.10073477711239859
#*# model_domain = 1.8668643870625854e-07,1.941049072423735e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 25.380841
#*# model_offset = 0.00000

